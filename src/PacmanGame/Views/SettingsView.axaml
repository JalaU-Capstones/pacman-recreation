<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:PacmanGame.ViewModels"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
             x:Class="PacmanGame.Views.SettingsView"
             x:DataType="vm:SettingsViewModel"
             Background="Black">

  <UserControl.Styles>
    <StyleInclude Source="/Styles/ButtonStyles.axaml" />

    <Style Selector="CheckBox.arcade">
        <Setter Property="Foreground" Value="White"/>
        <Setter Property="FontFamily" Value="Consolas"/>
    </Style>
    <Style Selector="CheckBox.arcade:pointerover /template/ ContentPresenter">
        <Setter Property="Foreground" Value="#FFFF00"/>
    </Style>
    <Style Selector="Slider.arcade">
        <Setter Property="Foreground" Value="#FFFF00"/>
    </Style>
  </UserControl.Styles>

  <Grid RowDefinitions="Auto,*,Auto">
    <TextBlock Grid.Row="0"
               Text="SETTINGS"
               Classes="h1"
               HorizontalAlignment="Center"
               Foreground="#FFFF00"
               FontFamily="{StaticResource ArcadeFont}"
               FontSize="36"
               Margin="0,40,0,20"/>

    <StackPanel Grid.Row="1" HorizontalAlignment="Center" Spacing="30" Width="500">

      <!-- Profile Management Section -->
      <Border BorderBrush="#2121FF" BorderThickness="2" CornerRadius="5" Padding="20">
        <StackPanel Spacing="15">
          <TextBlock Text="PROFILE MANAGEMENT"
                     Foreground="White"
                     FontFamily="Consolas"
                     FontSize="20"
                     FontWeight="Bold"
                     HorizontalAlignment="Center"/>

          <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="10">
            <TextBlock Text="Current Profile:" Foreground="Gray" FontFamily="Consolas" VerticalAlignment="Center"/>
            <TextBlock Text="{Binding ActiveProfile.Name}"
                       Foreground="{Binding ActiveProfile.AvatarColor}"
                       FontFamily="Consolas"
                       FontSize="18"
                       FontWeight="Bold"
                       VerticalAlignment="Center"/>
          </StackPanel>

          <Button Classes="arcade"
                  Command="{Binding SwitchProfileCommand}"
                  Content="SWITCH PROFILE"
                  HorizontalAlignment="Center"/>

          <Button Classes="arcade danger"
                  Command="{Binding ShowDeleteConfirmationCommand}"
                  Content="DELETE PROFILE"
                  HorizontalAlignment="Center"/>
        </StackPanel>
      </Border>

      <!-- Audio Settings -->
      <Border BorderBrush="#2121FF" BorderThickness="2" CornerRadius="5" Padding="20">
        <StackPanel Spacing="15">
          <TextBlock Text="AUDIO"
                     Foreground="White"
                     FontFamily="Consolas"
                     FontSize="20"
                     FontWeight="Bold"
                     HorizontalAlignment="Center"/>

          <CheckBox Classes="arcade" IsChecked="{Binding IsMusicEnabled}"
                    Content="Enable Audio"
                    HorizontalAlignment="Center"/>

          <!-- Volume Sliders -->
          <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto,Auto,Auto" Margin="0,10,0,0">
            <TextBlock Grid.Row="0" Grid.Column="0" Text="Menu Music" Foreground="White" VerticalAlignment="Center"/>
            <Slider Grid.Row="0" Grid.Column="1" Classes="arcade" Minimum="0" Maximum="100" Value="{Binding MenuMusicVolume}" Margin="10,0"/>
            <TextBlock Grid.Row="0" Grid.Column="2" Text="{Binding MenuMusicVolume}" Foreground="White" VerticalAlignment="Center"/>

            <TextBlock Grid.Row="1" Grid.Column="0" Text="Game Music" Foreground="White" VerticalAlignment="Center"/>
            <Slider Grid.Row="1" Grid.Column="1" Classes="arcade" Minimum="0" Maximum="100" Value="{Binding GameMusicVolume}" Margin="10,0"/>
            <TextBlock Grid.Row="1" Grid.Column="2" Text="{Binding GameMusicVolume}" Foreground="White" VerticalAlignment="Center"/>

            <TextBlock Grid.Row="2" Grid.Column="0" Text="Sound Effects" Foreground="White" VerticalAlignment="Center"/>
            <Slider Grid.Row="2" Grid.Column="1" Classes="arcade" Minimum="0" Maximum="100" Value="{Binding SfxVolume}" Margin="10,0"/>
            <TextBlock Grid.Row="2" Grid.Column="2" Text="{Binding SfxVolume}" Foreground="White" VerticalAlignment="Center"/>
          </Grid>
        </StackPanel>
      </Border>

    </StackPanel>

    <!-- Delete Confirmation Overlay -->
    <Grid Grid.Row="0" Grid.RowSpan="3"
          Background="#AA000000"
          IsVisible="{Binding IsDeleteConfirmationVisible}">
      <Border Background="#220000"
              BorderBrush="Red"
              BorderThickness="3"
              CornerRadius="10"
              HorizontalAlignment="Center"
              VerticalAlignment="Center"
              Padding="30"
              Width="400">
        <StackPanel Spacing="20">
          <TextBlock Text="DELETE PROFILE?"
                     Foreground="Red"
                     FontFamily="{StaticResource ArcadeFont}"
                     FontSize="24"
                     HorizontalAlignment="Center"/>

          <TextBlock Text="Are you sure you want to delete this profile? All scores will be lost forever."
                     Foreground="White"
                     FontFamily="Consolas"
                     TextWrapping="Wrap"
                     TextAlignment="Center"/>

          <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="20">
            <Button Classes="arcade"
                    Command="{Binding CancelDeleteCommand}"
                    Content="CANCEL" />
            <Button Classes="arcade danger"
                    Command="{Binding ConfirmDeleteCommand}"
                    Content="DELETE" />
          </StackPanel>
        </StackPanel>
      </Border>
    </Grid>

    <Button Grid.Row="2"
            Classes="arcade"
            Command="{Binding ReturnToMenuCommand}"
            Content="BACK"
            HorizontalAlignment="Center"
            Margin="0,20,0,40"/>
  </Grid>
</UserControl>
